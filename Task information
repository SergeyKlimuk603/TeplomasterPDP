documentation

Async 2
https://docs.google.com/spreadsheets/d/1kSDl-D6RFA9FND6lCdMZGKAPsSGn9GjKa3P7a4bFunw/edit#gid=0

Сделать батч который можно заскедулить из anonimus и передать запрос стрингой и можно заскедулить из интерфейса

взять всех лидов у которых чекбокс true. Обновить на false
После того как батч отработает проверить количество записей удовлетворяющих условию и если такие есть запустить его еще раз через 5 минут.

почитать про Batch Apex Error Event   

После отработки каждой чанки выкидывать platform event в котором будут указаны id обработанных лидов или необработанных. Сделать триггер на платформ event.
В триггере на платформ ивент проставлять в true еще один чекбокс на лиде. Почитать проEventBus.RetryableException

В батче в финиш методе выводить общее количество успешно обработанных лидов(system debug)

Комитнуть в гит.

Почитать про платформ ивенты. Почитать где можно подписать на платформ евент и как

почитать про flex queue